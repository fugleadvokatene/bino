---
title: File lifetime
---
stateDiagram-v2
    Nonexistent --> Staged: file uploaded and metadata created in ./tmp/{uuid}
    Staged --> Nonexistent: older than 24 hours - cleaned up by background job
    Staged --> Published: mv ./tmp/{uuid} ./file/{uuid} - entry created in db - deduplication
    Published --> Nonexistent: rm -rf ./file/{uuid} - entry deleted in db
