// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: sql-journal.sql

package sql

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const getJournalHTML = `-- name: GetJournalHTML :one
SELECT updated, html
FROM journal
WHERE patient_id = $1
`

type GetJournalHTMLRow struct {
	Updated pgtype.Timestamptz
	Html    pgtype.Text
}

func (q *Queries) GetJournalHTML(ctx context.Context, patientID int32) (GetJournalHTMLRow, error) {
	row := q.db.QueryRow(ctx, getJournalHTML, patientID)
	var i GetJournalHTMLRow
	err := row.Scan(&i.Updated, &i.Html)
	return i, err
}

const getJournalJSON = `-- name: GetJournalJSON :one
SELECT updated, json
FROM journal
WHERE patient_id = $1
`

type GetJournalJSONRow struct {
	Updated pgtype.Timestamptz
	Json    []byte
}

func (q *Queries) GetJournalJSON(ctx context.Context, patientID int32) (GetJournalJSONRow, error) {
	row := q.db.QueryRow(ctx, getJournalJSON, patientID)
	var i GetJournalJSONRow
	err := row.Scan(&i.Updated, &i.Json)
	return i, err
}

const upsertJournal = `-- name: UpsertJournal :exec
INSERT INTO journal (patient_id, updated, json, markdown, html)
VALUES ($1, NOW(), $2, $3, $4)
ON CONFLICT (patient_id) DO UPDATE
    SET updated=NOW(), json=EXCLUDED.json, markdown=EXCLUDED.markdown, html=EXCLUDED.html
`

type UpsertJournalParams struct {
	PatientID int32
	Json      []byte
	Markdown  pgtype.Text
	Html      pgtype.Text
}

func (q *Queries) UpsertJournal(ctx context.Context, arg UpsertJournalParams) error {
	_, err := q.db.Exec(ctx, upsertJournal,
		arg.PatientID,
		arg.Json,
		arg.Markdown,
		arg.Html,
	)
	return err
}
