// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: sql-journal.sql

package sql

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const getJournalHTML = `-- name: GetJournalHTML :one
SELECT updated, html
FROM journal
WHERE google_id = $1
`

type GetJournalHTMLRow struct {
	Updated pgtype.Timestamptz
	Html    pgtype.Text
}

func (q *Queries) GetJournalHTML(ctx context.Context, googleID string) (GetJournalHTMLRow, error) {
	row := q.db.QueryRow(ctx, getJournalHTML, googleID)
	var i GetJournalHTMLRow
	err := row.Scan(&i.Updated, &i.Html)
	return i, err
}

const getJournalJSON = `-- name: GetJournalJSON :one
SELECT updated, json
FROM journal
WHERE google_id = $1
`

type GetJournalJSONRow struct {
	Updated pgtype.Timestamptz
	Json    []byte
}

func (q *Queries) GetJournalJSON(ctx context.Context, googleID string) (GetJournalJSONRow, error) {
	row := q.db.QueryRow(ctx, getJournalJSON, googleID)
	var i GetJournalJSONRow
	err := row.Scan(&i.Updated, &i.Json)
	return i, err
}

const upsertJournal = `-- name: UpsertJournal :exec
INSERT INTO journal (
    google_id,
    origin,
    parent_google_id,
    updated,
    json,
    lang,
    header,
    body,
    markdown,
    html
)
VALUES (
    $1,
    $2,
    $3, 
    NOW(),
    $4,
    $5,
    $6,
    $7,
    $8,
    $9
)
ON CONFLICT (google_id) DO UPDATE
    SET updated=NOW(),
        origin=EXCLUDED.origin,
        parent_google_id=EXCLUDED.parent_google_id,
        json=EXCLUDED.json,
        lang=EXCLUDED.lang,
        header=EXCLUDED.header,
        body=EXCLUDED.body,
        markdown=EXCLUDED.markdown,
        html=EXCLUDED.html
`

type UpsertJournalParams struct {
	GoogleID       string
	Origin         int16
	ParentGoogleID pgtype.Text
	Json           []byte
	Lang           interface{}
	Header         pgtype.Text
	Body           pgtype.Text
	Markdown       pgtype.Text
	Html           pgtype.Text
}

func (q *Queries) UpsertJournal(ctx context.Context, arg UpsertJournalParams) error {
	_, err := q.db.Exec(ctx, upsertJournal,
		arg.GoogleID,
		arg.Origin,
		arg.ParentGoogleID,
		arg.Json,
		arg.Lang,
		arg.Header,
		arg.Body,
		arg.Markdown,
		arg.Html,
	)
	return err
}
